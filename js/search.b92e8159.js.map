{"version":3,"file":"js/search.b92e8159.js","mappings":"sJAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACA,EAAG,MAAM,CAACE,YAAY,aAAa,CAACF,EAAG,WAAW,CAACG,MAAM,CAAC,KAAO,cAAcC,GAAG,CAAC,MAAQN,EAAIO,QAAQL,EAAG,aAAa,CAACG,MAAM,CAAC,cAAc,IAAIC,GAAG,CAAC,OAASN,EAAIQ,UAAUC,YAAYT,EAAIU,GAAG,CAAC,CAACC,IAAI,SAASC,GAAG,WAAW,MAAO,CAACV,EAAG,OAAO,CAACE,YAAY,cAAcE,GAAG,CAAC,MAAQN,EAAIQ,WAAW,CAACR,EAAIa,GAAG,QAAS,EAACC,OAAM,KAAQC,MAAM,CAACC,MAAOhB,EAAIgB,MAAOC,SAAS,SAAUC,GAAMlB,EAAIgB,MAAsB,kBAARE,EAAkBA,EAAIC,OAAQD,CAAK,EAACE,WAAW,YAAY,GAAGlB,EAAG,WAAW,CAACE,YAAY,YAAYC,MAAM,CAAC,KAAO,OAAO,MAAQ,qBAAqBC,GAAG,CAAC,MAAQN,EAAIqB,UAAU,CAACnB,EAAG,UAAU,CAACG,MAAM,CAAC,MAAQ,QAAQH,EAAG,UAAU,CAACG,MAAM,CAAC,MAAQ,QAAQH,EAAG,UAAU,CAACG,MAAM,CAAC,MAAQ,SAAS,GAAGH,EAAG,mBAAmB,CAACG,MAAM,CAAC,eAAe,QAAQC,GAAG,CAAC,QAAUN,EAAIsB,WAAWP,MAAM,CAACC,MAAOhB,EAAIuB,WAAYN,SAAS,SAAUC,GAAMlB,EAAIuB,WAAWL,CAAI,EAACE,WAAW,eAAe,CAAClB,EAAG,WAAW,CAACG,MAAM,CAAC,SAAWL,EAAIwB,SAAS,gBAAgB,SAASlB,GAAG,CAAC,KAAON,EAAIyB,QAAQV,MAAM,CAACC,MAAOhB,EAAI0B,QAAST,SAAS,SAAUC,GAAMlB,EAAI0B,QAAQR,CAAI,EAACE,WAAW,YAAYpB,EAAI2B,GAAI3B,EAAI4B,MAAM,SAASC,GAAM,OAAO3B,EAAG,WAAW,CAACS,IAAIkB,EAAKC,QAAQzB,MAAM,CAAC,MAAQwB,EAAKE,aAAa,KAAOF,EAAKG,WAAW,MAAQH,EAAKI,UAAU,MAAQJ,EAAKK,eAAe5B,GAAG,CAAC,MAAQ,SAAS6B,GAAQ,OAAOnC,EAAIoC,WAAWP,EAAKC,QAAS,IAAI,IAAE,IAAI,IAAI,EAC72C,EACGO,EAAkB,G,UC2BtB,GACAC,KAAAA,SACAC,MAAAA,GACAC,UAEA,0CACA,sBAIA,+EAGA,EACAC,OACA,OACAzB,MAAAA,GACAY,KAAAA,GACAF,SAAAA,EACAF,UAAAA,EACAkB,WAAAA,EACAC,QAAAA,GACApB,YAAAA,EACAqB,UAAAA,GACAC,gBAAAA,GAEA,EACAC,QAAAA,CAEAC,aAAAA,EAAAA,EAAAA,EAAAA,IAEAC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,EAAAA,GAAAA,MAAAA,IACA,sBACA,wBAEA,kBAEA,2BAEA,sBAEA,YADA,0BAEA,GAEA,EAEAvB,UACAuB,EAAAA,EAAAA,MAAAA,KAAAA,WAAAA,KAAAA,gBAAAA,KAAAA,MAAAA,KAAAA,SAAAA,MAAAA,IACA,qBACA,wBACA,kBAEA,wCACA,gBACA,mBACA,GAEA,EAEAxC,WACA,WACA,gFAEA,6BAEA,EAEAD,OACA,mBACA,EAEAc,QAAAA,GACA,WACA,MACA,iBACA,iFACA,MACA,iBACA,mBACA,iFACA,OACA,iBACA,qBACA,iFAGA,6BAEA,EAEAC,YAEA,iBAGA,gBACA,aACA,EAEAc,WAAAA,IACAa,EAAAA,EAAAA,IAAAA,GAAAA,MAAAA,IACA,oBACA,6BACA,GAEA,ICtI+P,I,UCQ3PC,GAAY,OACd,EACAnD,EACAsC,GACA,EACA,KACA,WACA,MAIF,EAAea,EAAiB,O","sources":["webpack://myapp/./src/views/Search/Search.vue","webpack://myapp/src/views/Search/Search.vue","webpack://myapp/./src/views/Search/Search.vue?f73d","webpack://myapp/./src/views/Search/Search.vue?3e52"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('div',{staticClass:\"searchnav\"},[_c('van-icon',{attrs:{\"name\":\"arrow-left\"},on:{\"click\":_vm.back}}),_c('van-search',{attrs:{\"show-action\":\"\"},on:{\"search\":_vm.onSearch},scopedSlots:_vm._u([{key:\"action\",fn:function(){return [_c('span',{staticClass:\"searchright\",on:{\"click\":_vm.onSearch}},[_vm._v(\"搜索\")])]},proxy:true}]),model:{value:(_vm.value),callback:function ($$v) {_vm.value=(typeof $$v === 'string'? $$v.trim(): $$v)},expression:\"value\"}})],1),_c('van-tabs',{staticClass:\"recommend\",attrs:{\"type\":\"card\",\"color\":\"rgb(27, 174, 174)\"},on:{\"click\":_vm.onClick}},[_c('van-tab',{attrs:{\"title\":\"推荐\"}}),_c('van-tab',{attrs:{\"title\":\"新品\"}}),_c('van-tab',{attrs:{\"title\":\"价格\"}})],1),_c('van-pull-refresh',{attrs:{\"success-text\":\"刷新成功\"},on:{\"refresh\":_vm.onRefresh},model:{value:(_vm.refreshing),callback:function ($$v) {_vm.refreshing=$$v},expression:\"refreshing\"}},[_c('van-list',{attrs:{\"finished\":_vm.finished,\"finished-text\":\"没有更多了\"},on:{\"load\":_vm.onLoad},model:{value:(_vm.loading),callback:function ($$v) {_vm.loading=$$v},expression:\"loading\"}},_vm._l((_vm.list),function(item){return _c('van-card',{key:item.goodsId,attrs:{\"price\":item.sellingPrice,\"desc\":item.goodsIntro,\"title\":item.goodsName,\"thumb\":item.goodsCoverImg},on:{\"click\":function($event){return _vm.oneShoping(item.goodsId)}}})}),1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div>\r\n        <!-- 搜索导航 -->\r\n        <div class=\"searchnav\">\r\n            <van-icon name=\"arrow-left\" @click=\"back\" />\r\n            <van-search v-model.trim=\"value\" show-action @search=\"onSearch\">\r\n                <template #action>\r\n                    <span @click=\"onSearch\" class=\"searchright\">搜索</span>\r\n                </template>\r\n            </van-search>\r\n        </div>\r\n        <!-- 推荐，新品，价格 -->\r\n        <van-tabs type=\"card\" color=\"rgb(27, 174, 174)\" class=\"recommend\" @click=\"onClick\">\r\n            <van-tab title=\"推荐\"></van-tab>\r\n            <van-tab title=\"新品\"></van-tab>\r\n            <van-tab title=\"价格\"></van-tab>\r\n        </van-tabs>\r\n        <!-- 搜索到的商品 -->\r\n        <van-pull-refresh v-model=\"refreshing\" @refresh=\"onRefresh\" success-text=\"刷新成功\">\r\n            <van-list v-model=\"loading\" :finished=\"finished\" finished-text=\"没有更多了\" @load=\"onLoad\">\r\n                <van-card v-for=\"item in list\" :key=\"item.goodsId\" :price=\"item.sellingPrice\" :desc=\"item.goodsIntro\"\r\n                    :title=\"item.goodsName\" :thumb=\"item.goodsCoverImg\" @click=\"oneShoping(item.goodsId)\" />\r\n            </van-list>\r\n        </van-pull-refresh>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { searchHandle, goods } from \"@/api/index\"\r\nexport default {\r\n    name: \"Search\",\r\n    props: [],\r\n    mounted() {\r\n        // console.log(this.$route.query.id);\r\n        this.goodsCategoryId = this.$route.query.id\r\n        if (!this.goodsCategoryId) {\r\n            return\r\n        } {\r\n            // console.log(this.pageNumber, this.goodsCategoryId, this.value, this.orderBy);\r\n            this.searchReques(this.pageNumber, this.goodsCategoryId, this.value, this.orderBy)\r\n        }\r\n\r\n    },\r\n    data() {\r\n        return {\r\n            value: '', //搜索内容\r\n            list: [],//搜索的数据\r\n            loading: false,//加载效果\r\n            finished: true,//没有更多\r\n            pageNumber: 1,//页数\r\n            orderBy: '',//请求的类型(推荐，新品，价格)\r\n            refreshing: false,//上拉刷新\r\n            shopingId: '',\r\n            goodsCategoryId: ''\r\n        }\r\n    },\r\n    methods: {\r\n        // 封装请求的函数\r\n        searchReques(pageNumber, goodsCategoryId, value, orderBy) {\r\n            // 发起数据请求\r\n            searchHandle(pageNumber, goodsCategoryId, value, orderBy).then(data => {\r\n                if (data.resultCode === 200) {\r\n                    if (data.data.list.length == 0) {\r\n                        // console.log(data.data.list.length);\r\n                        this.finished = true;\r\n                    }\r\n                    this.list = data.data.list;\r\n                    // console.log(this.list);\r\n                } else if (data.resultCode === 500){\r\n                    this.$toast.fail('搜索内容异常');\r\n                    return;\r\n                }\r\n            })\r\n        },\r\n        // 触底事件\r\n        onLoad() {\r\n            searchHandle(++this.pageNumber, this.goodsCategoryId, this.value, this.orderBy).then(data => {\r\n                if (data.resultCode === 200) {\r\n                    if (data.data.list.length == 0) {\r\n                        this.finished = true;\r\n                    }\r\n                    this.list = this.list.concat(data.data.list)\r\n                    this.loading = false;\r\n                    this.refreshing = false;\r\n                }\r\n            })\r\n        },\r\n        // 点击搜索\r\n        onSearch() {\r\n            if (this.value) {\r\n                this.searchReques(this.pageNumber, this.goodsCategoryId, this.value, this.orderBy)\r\n            } else {\r\n                this.$toast.fail('请输入要查询的商品');\r\n            }\r\n        },\r\n        // 点击头部左上角<\r\n        back() {\r\n            this.$router.back()\r\n        },\r\n        // 切换标签\r\n        onClick(title) {\r\n            if (this.value) {\r\n                if (title == 0) {\r\n                    this.finished = false;\r\n                    this.searchReques(this.pageNumber, this.goodsCategoryId, this.value, this.orderBy)\r\n                } else if (title == 1) {\r\n                    this.finished = false;\r\n                    this.orderBy = 'new'\r\n                    this.searchReques(this.pageNumber, this.goodsCategoryId, this.value, this.orderBy)\r\n                } else if (title == 2) {\r\n                    this.finished = false;\r\n                    this.orderBy = 'price'\r\n                    this.searchReques(this.pageNumber, this.goodsCategoryId, this.value, this.orderBy)\r\n                }\r\n            } else {\r\n                this.$toast.fail('请输入要查询的商品');\r\n            }\r\n        },\r\n        // 下拉刷新\r\n        onRefresh() {\r\n            // 清空列表数据\r\n            this.finished = false;\r\n            // 重新加载数据\r\n            // 将 loading 设置为 true，表示处于加载状态\r\n            this.loading = true;\r\n            this.onLoad();\r\n        },\r\n        // 点击商品\r\n        oneShoping(productId) {\r\n            goods(productId).then(data => {\r\n                if (data.resultCode === 200) {\r\n                    this.$router.push('/info/' + productId)\r\n                }\r\n            })\r\n        }\r\n    }\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n/deep/.van-tabs--card {\r\n    position: fixed;\r\n    top: 60px;\r\n    z-index: 300;\r\n    width: 100%;\r\n}\r\n\r\n.van-card {\r\n    height: 141px;\r\n    margin: 0;\r\n    padding: 0px 10px;\r\n    background-color: white;\r\n    border-bottom: .02667rem solid #dcdcdc;\r\n\r\n    .van-card__header {\r\n        height: 100%;\r\n\r\n        .van-card__thumb {\r\n            height: 100%;\r\n            width: 130px;\r\n\r\n            .van-image {\r\n                height: 100%;\r\n\r\n                img {\r\n                    display: inline-block;\r\n                    height: 100%;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    .van-card__content {\r\n        box-sizing: border-box;\r\n        padding-bottom: 40px;\r\n    }\r\n}\r\n\r\n.van-list {\r\n    margin-top: 90px;\r\n}\r\n\r\n.van-card__title {\r\n    font-size: .4rem;\r\n    color: #333;\r\n    width: 100%;\r\n    max-height: 0.53333rem;\r\n    padding: 0.26667rem 0;\r\n}\r\n\r\n.van-card__price {\r\n    color: #1baeae;\r\n    font-size: .42667rem;\r\n}\r\n\r\n.van-card__desc {\r\n    font-size: .34667rem;\r\n    color: #999;\r\n}\r\n\r\n.searchnav {\r\n    display: flex;\r\n    height: 56px;\r\n    line-height: 100%;\r\n    background-color: white;\r\n    position: fixed;\r\n    width: 100%;\r\n    z-index: 300;\r\n\r\n    /deep/.van-icon-arrow-left {\r\n        line-height: 54px;\r\n        padding: 0 15px;\r\n        font-size: 20px;\r\n\r\n    }\r\n\r\n    /deep/.van-search {\r\n        width: 100%;\r\n        border-radius: 20px;\r\n        padding: 0px;\r\n\r\n        .van-icon-search {\r\n            font-weight: 500;\r\n            font-size: 20px;\r\n        }\r\n\r\n        .van-search__action {\r\n            padding: 0px;\r\n            margin: 0 5px;\r\n        }\r\n\r\n        .searchright {\r\n            box-sizing: border-box;\r\n            // width: 45px;\r\n            text-align: center;\r\n            font-size: .4rem;\r\n            color: white;\r\n            font-weight: 500;\r\n            background-color: #1baeae;\r\n            border-radius: 5px;\r\n            padding: 6px;\r\n            // margin: 0 10px;\r\n        }\r\n    }\r\n\r\n    /deep/.van-search__content {\r\n        border-radius: 20px;\r\n        background-color: #f7f7f7;\r\n    }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Search.vue?vue&type=template&id=9a5a1a88&scoped=true&\"\nimport script from \"./Search.vue?vue&type=script&lang=js&\"\nexport * from \"./Search.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Search.vue?vue&type=style&index=0&id=9a5a1a88&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9a5a1a88\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","on","back","onSearch","scopedSlots","_u","key","fn","_v","proxy","model","value","callback","$$v","trim","expression","onClick","onRefresh","refreshing","finished","onLoad","loading","_l","list","item","goodsId","sellingPrice","goodsIntro","goodsName","goodsCoverImg","$event","oneShoping","staticRenderFns","name","props","mounted","data","pageNumber","orderBy","shopingId","goodsCategoryId","methods","searchReques","searchHandle","goods","component"],"sourceRoot":""}