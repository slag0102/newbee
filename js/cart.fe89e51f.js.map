{"version":3,"file":"js/cart.fe89e51f.js","mappings":"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","sources":["webpack://myapp/./src/views/Cart/Cart.vue","webpack://myapp/src/views/Cart/Cart.vue","webpack://myapp/./src/views/Cart/Cart.vue?2821","webpack://myapp/./src/views/Cart/Cart.vue?7497"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('van-nav-bar',{staticStyle:{\"border-bottom\":\"0.02667rem solid #dcdcdc\",\"margin-bottom\":\"10px\"},attrs:{\"title\":\"购物车\",\"fixed\":\"\",\"left-arrow\":\"\"},on:{\"click-left\":function($event){return _vm.$router.push('/home')}},scopedSlots:_vm._u([{key:\"right\",fn:function(){return [_c('van-icon',{attrs:{\"name\":\"ellipsis\",\"size\":\"18\"}})]},proxy:true}])}),_vm._l((_vm.list),function(item){return _c('van-swipe-cell',{key:item.goodsId,scopedSlots:_vm._u([{key:\"right\",fn:function(){return [_c('van-button',{staticClass:\"delete-button\",attrs:{\"square\":\"\",\"text\":\"删除\",\"type\":\"danger\"},on:{\"click\":function($event){return _vm.deleteShoping(item.cartItemId)}}})]},proxy:true}],null,true)},[_c('van-row',{attrs:{\"type\":\"flex\",\"align\":\"center\"}},[_c('van-col',{attrs:{\"span\":3}},[_c('van-checkbox',{staticClass:\"checkbox\",model:{value:(item.checked),callback:function ($$v) {_vm.$set(item, \"checked\", $$v)},expression:\"item.checked\"}})],1),_c('van-col',{attrs:{\"span\":21}},[_c('van-card',{staticClass:\"goods-card\",attrs:{\"num\":item.goodsCount,\"price\":item.sellingPrice,\"title\":item.goodsName,\"thumb\":item.goodsCoverImg},scopedSlots:_vm._u([{key:\"footer\",fn:function(){return [_c('van-stepper',{attrs:{\"integer\":\"\",\"button-size\":\"24px\"},on:{\"plus\":function($event){return _vm.plusHandle(item.cartItemId, item.goodsCount)},\"minus\":function($event){return _vm.minusHandle(item.cartItemId, item.goodsCount)}},model:{value:(item.goodsCount),callback:function ($$v) {_vm.$set(item, \"goodsCount\", $$v)},expression:\"item.goodsCount\"}})]},proxy:true}],null,true)})],1)],1)],1)}),(_vm.list.length === 0 ? false : true)?_c('van-submit-bar',{staticClass:\"submitBar\",attrs:{\"price\":_vm.totalMoney,\"button-text\":\"结算\"},on:{\"submit\":_vm.onSubmit},scopedSlots:_vm._u([{key:\"tip\",fn:function(){return [_vm._v(\" 你的收货地址不支持同城送, \"),_c('span',{on:{\"click\":_vm.onClickEditAddress}},[_vm._v(\"修改地址\")])]},proxy:true}],null,false,2324175143)},[_c('van-checkbox',{model:{value:(_vm.checkedAll),callback:function ($$v) {_vm.checkedAll=$$v},expression:\"checkedAll\"}},[_vm._v(\"全选\")])],1):_vm._e(),(_vm.list.length === 0 ? true : false)?_c('div',{staticClass:\"empty\"},[_c('van-icon',{attrs:{\"name\":\"smile-o\"}}),_c('p',[_vm._v(\"购物车空空如也\")]),_c('van-button',{attrs:{\"color\":\"rgb(27, 174, 174)\",\"to\":\"/home\"}},[_vm._v(\"前往首页\")])],1):_vm._e()],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div>\r\n        <!-- 头部 -->\r\n        <van-nav-bar title=\"购物车\" fixed left-arrow @click-left=\"$router.push('/home')\"\r\n            style=\"border-bottom: 0.02667rem solid #dcdcdc;margin-bottom: 10px;\">\r\n            <template #right>\r\n                <van-icon name=\"ellipsis\" size=\"18\"  />\r\n            </template>\r\n        </van-nav-bar>\r\n\r\n        <van-swipe-cell v-for=\"(item) in list\" :key=\"item.goodsId\">\r\n            <van-row type=\"flex\" align=\"center\">\r\n                <van-col :span=\"3\">\r\n                    <van-checkbox v-model=\"item.checked\" class=\"checkbox\"></van-checkbox>\r\n                </van-col>\r\n                <van-col :span=\"21\">\r\n                    <van-card :num=\"item.goodsCount\" :price=\"item.sellingPrice\" :title=\"item.goodsName\"\r\n                        class=\"goods-card\" :thumb=\"item.goodsCoverImg\">\r\n                        <template #footer>\r\n                            <van-stepper v-model='item.goodsCount' integer button-size=\"24px\"\r\n                                @plus=\"plusHandle(item.cartItemId, item.goodsCount)\"\r\n                                @minus=\"minusHandle(item.cartItemId, item.goodsCount)\" />\r\n                        </template>\r\n                    </van-card>\r\n                </van-col>\r\n            </van-row>\r\n            <template #right>\r\n                <van-button square text=\"删除\" type=\"danger\" class=\"delete-button\"\r\n                    @click=\"deleteShoping(item.cartItemId)\" />\r\n            </template>\r\n        </van-swipe-cell>\r\n        <!--  -->\r\n        <van-submit-bar :price=\"totalMoney\" button-text=\"结算\" @submit=\"onSubmit\" class=\"submitBar\"\r\n            v-if=\"list.length === 0 ? false : true\">\r\n            <van-checkbox v-model=\"checkedAll\">全选</van-checkbox>\r\n            <template #tip>\r\n                你的收货地址不支持同城送, <span @click=\"onClickEditAddress\" style=\"\">修改地址</span>\r\n            </template>\r\n        </van-submit-bar>\r\n        <!--  -->\r\n        <div class=\"empty\" v-if=\"list.length === 0 ? true : false\">\r\n            <van-icon name=\"smile-o\" />\r\n            <p>购物车空空如也</p>\r\n            <van-button color=\"rgb(27, 174, 174)\" to=\"/home\">前往首页</van-button>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { plus, deleteHeandle} from \"@/api/index\";\r\nimport { Toast } from \"vant\";\r\nexport default {\r\n    name: \"cart\",\r\n    props: [],\r\n    created() {\r\n        this.$store.dispatch('changeCartListAsync')\r\n    },\r\n    data() {\r\n        return {\r\n            cartItemId: []\r\n        }\r\n    },\r\n    methods: {\r\n        //   点击结算\r\n        onSubmit() {\r\n            this.list.filter(item => { item.checked == true })\r\n            this.list.forEach(item => {\r\n                // console.log(item);\r\n                if (item.checked == true) {\r\n                    item.cartItemId\r\n                    this.cartItemId.push(item.cartItemId);\r\n                    // console.log(this.cartItemId);\r\n                }\r\n            })\r\n            this.$router.push(\"/addresslist?cartItemId=\" + this.cartItemId)\r\n\r\n        },\r\n        // 修改收货地址\r\n        onClickEditAddress() {\r\n            this.$router.push(\"/addresslist\")\r\n        },\r\n        // 点击增加按钮时触发  将商品id和数量传给服务器\r\n        plusHandle(cartItemId, goodsCount) {\r\n            // console.log(cartItemId, goodsCount);\r\n            // 将新数量传给服务器\r\n            plus(cartItemId, goodsCount + 1).then(data => {\r\n                // console.log(data);\r\n                if (data.resultCode === 200) {\r\n                    // this.$store.state.cartList.goodsCount++\r\n                    this.$store.dispatch(\"changeCartListAsync\")\r\n                }\r\n            })\r\n\r\n        },\r\n        // 点击减少按钮时触发\r\n        minusHandle(cartItemId, goodsCount) {\r\n            plus(cartItemId, goodsCount - 1).then(data => {\r\n                // console.log(data);\r\n                if (data.resultCode === 200) {\r\n                    // this.$store.state.cartList.goodsCount--\r\n                    this.$store.dispatch(\"changeCartListAsync\")\r\n                }\r\n            })\r\n        },\r\n        // 点击删除\r\n        deleteShoping(cartItemId) {\r\n            // console.log(cartItemId);\r\n            deleteHeandle(cartItemId).then(data => {\r\n                if (data.resultCode === 200) {\r\n                    this.$store.dispatch(\"changeCartListAsync\");\r\n                    Toast.success('删除成功')\r\n                };\r\n            })\r\n\r\n        },\r\n\r\n    },\r\n    // 计算属性\r\n    computed: {\r\n        // 返回仓库store的state的数据\r\n        list() {\r\n            return this.$store.state.cartList || []\r\n        },\r\n        // 全选\r\n        checkedAll: {\r\n            get() {\r\n                if (this.list.length == 0) {\r\n                    return false\r\n                } else {\r\n                    return this.list.every(item => item.checked)\r\n                }\r\n            },\r\n            set(val) {\r\n                console.log(val); //val是全选按钮的状态(true或false)\r\n                this.list.forEach(item => item.checked = val)\r\n            }\r\n        },\r\n        // 计算总价\r\n        totalMoney() {\r\n            // console.log(this.list);\r\n            return this.list.reduce((prev, next) => {\r\n                return prev + (next.checked ? next.goodsCount * next.sellingPrice * 100 : 0)\r\n            }, 0)\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n/deep/.van-nav-bar .van-icon{\r\n    color: #252525;\r\n}\r\n\r\n.van-swipe-cell {\r\n    padding-top: 50px;\r\n}\r\n\r\n.goods-card {\r\n    padding: 0;\r\n    position: relative;\r\n}\r\n\r\n.checkbox {\r\n    display: flex;\r\n    justify-content: center;\r\n\r\n}\r\n\r\n.van-card__price-currency,\r\n.van-card__price-integer {\r\n    color: red;\r\n}\r\n\r\n.van-card__content {\r\n    box-sizing: border-box;\r\n    padding: 15px 15px 15px 5px;\r\n}\r\n\r\n.van-card__title {\r\n    width: 90%;\r\n}\r\n\r\n.van-card__num {\r\n    position: absolute;\r\n    top: 15px;\r\n    right: 15px;\r\n}\r\n\r\n.van-stepper {\r\n    position: absolute;\r\n    bottom: 15px;\r\n    right: 10px;\r\n\r\n}\r\n\r\n.submitBar {\r\n    margin-bottom: 50px;\r\n}\r\n\r\n\r\n.delete-button {\r\n    height: 100%;\r\n}\r\n\r\n.empty {\r\n    width: 50%;\r\n    margin: 50% auto;\r\n    text-align: center;\r\n\r\n    i {\r\n        font-size: 50px;\r\n    }\r\n\r\n    p {\r\n        font-size: 16px;\r\n        margin: 5px 0px 20px 0px;\r\n    }\r\n\r\n    .van-button {\r\n        width: 100%;\r\n    }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Cart.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Cart.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Cart.vue?vue&type=template&id=3fc9e7fa&scoped=true&\"\nimport script from \"./Cart.vue?vue&type=script&lang=js&\"\nexport * from \"./Cart.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Cart.vue?vue&type=style&index=0&id=3fc9e7fa&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3fc9e7fa\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticStyle","attrs","on","$event","$router","push","scopedSlots","_u","key","fn","proxy","_l","list","item","goodsId","staticClass","deleteShoping","cartItemId","model","value","checked","callback","$$v","$set","expression","goodsCount","sellingPrice","goodsName","goodsCoverImg","plusHandle","minusHandle","length","totalMoney","onSubmit","_v","onClickEditAddress","checkedAll","_e","staticRenderFns","name","props","created","data","methods","plus","deleteHeandle","computed","get","set","console","component"],"sourceRoot":""}