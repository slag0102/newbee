"use strict";(self["webpackChunkmyapp"]=self["webpackChunkmyapp"]||[]).push([[763],{4778:function(t,s,e){e.r(s),e.d(s,{default:function(){return l}});var r=function(){var t=this,s=t._self._c;return s("div",[s("van-nav-bar",{staticStyle:{"border-bottom":"0.02667rem solid #dcdcdc","margin-bottom":"10px"},attrs:{fixed:"",title:"生成订单","left-arrow":""},on:{"click-left":function(s){return t.$router.push("/cart")}},scopedSlots:t._u([{key:"right",fn:function(){return[s("van-icon",{attrs:{name:"ellipsis",size:"18"}})]},proxy:!0}])}),s("van-contact-card",{attrs:{type:"edit",name:t.name,tel:t.phone},on:{click:function(s){return t.$router.push("/addresslist")}}}),s("p",{staticClass:"address"},[t._v("地址："+t._s(t.address))]),t._l(t.list,(function(t){return s("van-card",{key:t.goodsId,attrs:{num:t.goodsCount,price:t.sellingPrice,title:t.goodsName,thumb:t.goodsCoverImg}})})),s("van-submit-bar",{attrs:{"button-text":"生成订单","button-color":"rgb(27, 174, 174)"},on:{submit:t.onSubmit},scopedSlots:t._u([{key:"tip",fn:function(){return[s("p",{staticClass:"total"},[s("span",{staticClass:"shoping"},[t._v("商品金额")]),s("span",{staticClass:"money"},[t._v("￥"+t._s(t.totalMoney))])])]},proxy:!0}])}),s("van-popup",{style:{height:"30%"},attrs:{closeable:"",position:"bottom"},on:{"click-close-icon":t.cancel},model:{value:t.show,callback:function(s){t.show=s},expression:"show"}},[s("van-button",{attrs:{type:"info",color:"rgb(25, 137, 250)"},on:{click:t.payAlipay}},[t._v("支付宝支付")]),s("van-button",{attrs:{type:"primary",color:"rgb(79, 192, 141)"},on:{click:t.wechatPay}},[t._v("微信支付")])],1)],2)},a=[],o=e(9547),i={name:"createrorder",props:[],created(){this.cartId=this.$route.query.cartItemId,this.id=this.$route.query.addressId,(0,o.HQ)(this.id).then((t=>{200===t.resultCode&&(this.address=t.data.provinceName+t.data.regionName+t.data.detailAddress,this.name=t.data.userName,this.phone=t.data.userPhone)})),(0,o.Oc)(this.cartId).then((t=>{200===t.resultCode&&(this.list=t.data)}))},data(){return{id:"",name:"",phone:"",address:"",show:!1,cartItemId:[],cartId:[],list:[],orderNo:"",payType:0}},methods:{onSubmit(){null!=this.list&&this.list.forEach((t=>{this.cartItemId.push(t.cartItemId)})),(0,o.TR)(this.address.addressId,this.cartItemId).then((t=>{200===t.resultCode&&(this.orderNo=t.data)})),this.show=!0},payAlipay(){this.payType=1,(0,o.OX)(this.orderNo,this.payType).then((t=>{200===t.resultCode&&(this.$toast.success("支付宝支付成功"),this.$router.push("/order"))}))},wechatPay(){this.payType=2,(0,o.OX)(this.orderNo,this.payType).then((t=>{200===t.resultCode&&(this.$toast.success("微信支付成功"),this.$router.push("/order"))}))},cancel(){this.$router.push("/order")}},computed:{totalMoney(){return null!=this.list?this.list.reduce(((t,s)=>t+s.goodsCount*s.sellingPrice),0):0}}},n=i,d=e(1001),c=(0,d.Z)(n,r,a,!1,null,"7775caa8",null),l=c.exports}}]);
//# sourceMappingURL=create-order.4b0a89df.js.map