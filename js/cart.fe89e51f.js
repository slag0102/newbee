"use strict";(self["webpackChunkmyapp"]=self["webpackChunkmyapp"]||[]).push([[511],{5973:function(t,e,s){s.r(e),s.d(e,{default:function(){return d}});var n=function(){var t=this,e=t._self._c;return e("div",[e("van-nav-bar",{staticStyle:{"border-bottom":"0.02667rem solid #dcdcdc","margin-bottom":"10px"},attrs:{title:"购物车",fixed:"","left-arrow":""},on:{"click-left":function(e){return t.$router.push("/home")}},scopedSlots:t._u([{key:"right",fn:function(){return[e("van-icon",{attrs:{name:"ellipsis",size:"18"}})]},proxy:!0}])}),t._l(t.list,(function(s){return e("van-swipe-cell",{key:s.goodsId,scopedSlots:t._u([{key:"right",fn:function(){return[e("van-button",{staticClass:"delete-button",attrs:{square:"",text:"删除",type:"danger"},on:{click:function(e){return t.deleteShoping(s.cartItemId)}}})]},proxy:!0}],null,!0)},[e("van-row",{attrs:{type:"flex",align:"center"}},[e("van-col",{attrs:{span:3}},[e("van-checkbox",{staticClass:"checkbox",model:{value:s.checked,callback:function(e){t.$set(s,"checked",e)},expression:"item.checked"}})],1),e("van-col",{attrs:{span:21}},[e("van-card",{staticClass:"goods-card",attrs:{num:s.goodsCount,price:s.sellingPrice,title:s.goodsName,thumb:s.goodsCoverImg},scopedSlots:t._u([{key:"footer",fn:function(){return[e("van-stepper",{attrs:{integer:"","button-size":"24px"},on:{plus:function(e){return t.plusHandle(s.cartItemId,s.goodsCount)},minus:function(e){return t.minusHandle(s.cartItemId,s.goodsCount)}},model:{value:s.goodsCount,callback:function(e){t.$set(s,"goodsCount",e)},expression:"item.goodsCount"}})]},proxy:!0}],null,!0)})],1)],1)],1)})),0!==t.list.length?e("van-submit-bar",{staticClass:"submitBar",attrs:{price:t.totalMoney,"button-text":"结算"},on:{submit:t.onSubmit},scopedSlots:t._u([{key:"tip",fn:function(){return[t._v(" 你的收货地址不支持同城送, "),e("span",{on:{click:t.onClickEditAddress}},[t._v("修改地址")])]},proxy:!0}],null,!1,2324175143)},[e("van-checkbox",{model:{value:t.checkedAll,callback:function(e){t.checkedAll=e},expression:"checkedAll"}},[t._v("全选")])],1):t._e(),0===t.list.length?e("div",{staticClass:"empty"},[e("van-icon",{attrs:{name:"smile-o"}}),e("p",[t._v("购物车空空如也")]),e("van-button",{attrs:{color:"rgb(27, 174, 174)",to:"/home"}},[t._v("前往首页")])],1):t._e()],2)},o=[],c=(s(5170),s(982)),r=s(9547),a={name:"cart",props:[],created(){this.$store.dispatch("changeCartListAsync")},data(){return{cartItemId:[]}},methods:{onSubmit(){this.list.filter((t=>{t.checked})),this.list.forEach((t=>{1==t.checked&&(t.cartItemId,this.cartItemId.push(t.cartItemId))})),this.$router.push("/addresslist?cartItemId="+this.cartItemId)},onClickEditAddress(){this.$router.push("/addresslist")},plusHandle(t,e){(0,r.PD)(t,e+1).then((t=>{200===t.resultCode&&this.$store.dispatch("changeCartListAsync")}))},minusHandle(t,e){(0,r.PD)(t,e-1).then((t=>{200===t.resultCode&&this.$store.dispatch("changeCartListAsync")}))},deleteShoping(t){(0,r.Uc)(t).then((t=>{200===t.resultCode&&(this.$store.dispatch("changeCartListAsync"),c.Z.success("删除成功"))}))}},computed:{list(){return this.$store.state.cartList||[]},checkedAll:{get(){return 0!=this.list.length&&this.list.every((t=>t.checked))},set(t){console.log(t),this.list.forEach((e=>e.checked=t))}},totalMoney(){return this.list.reduce(((t,e)=>t+(e.checked?e.goodsCount*e.sellingPrice*100:0)),0)}}},i=a,l=s(1001),u=(0,l.Z)(i,n,o,!1,null,"3fc9e7fa",null),d=u.exports}}]);
//# sourceMappingURL=cart.fe89e51f.js.map