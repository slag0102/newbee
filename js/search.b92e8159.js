"use strict";(self["webpackChunkmyapp"]=self["webpackChunkmyapp"]||[]).push([[464],{4011:function(e,t,s){s.r(t),s.d(t,{default:function(){return d}});var i=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"searchnav"},[t("van-icon",{attrs:{name:"arrow-left"},on:{click:e.back}}),t("van-search",{attrs:{"show-action":""},on:{search:e.onSearch},scopedSlots:e._u([{key:"action",fn:function(){return[t("span",{staticClass:"searchright",on:{click:e.onSearch}},[e._v("搜索")])]},proxy:!0}]),model:{value:e.value,callback:function(t){e.value="string"===typeof t?t.trim():t},expression:"value"}})],1),t("van-tabs",{staticClass:"recommend",attrs:{type:"card",color:"rgb(27, 174, 174)"},on:{click:e.onClick}},[t("van-tab",{attrs:{title:"推荐"}}),t("van-tab",{attrs:{title:"新品"}}),t("van-tab",{attrs:{title:"价格"}})],1),t("van-pull-refresh",{attrs:{"success-text":"刷新成功"},on:{refresh:e.onRefresh},model:{value:e.refreshing,callback:function(t){e.refreshing=t},expression:"refreshing"}},[t("van-list",{attrs:{finished:e.finished,"finished-text":"没有更多了"},on:{load:e.onLoad},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},e._l(e.list,(function(s){return t("van-card",{key:s.goodsId,attrs:{price:s.sellingPrice,desc:s.goodsIntro,title:s.goodsName,thumb:s.goodsCoverImg},on:{click:function(t){return e.oneShoping(s.goodsId)}}})})),1)],1)],1)},a=[],o=s(9547),r={name:"Search",props:[],mounted(){this.goodsCategoryId=this.$route.query.id,this.goodsCategoryId&&this.searchReques(this.pageNumber,this.goodsCategoryId,this.value,this.orderBy)},data(){return{value:"",list:[],loading:!1,finished:!0,pageNumber:1,orderBy:"",refreshing:!1,shopingId:"",goodsCategoryId:""}},methods:{searchReques(e,t,s,i){(0,o.gZ)(e,t,s,i).then((e=>{if(200===e.resultCode)0==e.data.list.length&&(this.finished=!0),this.list=e.data.list;else if(500===e.resultCode)return void this.$toast.fail("搜索内容异常")}))},onLoad(){(0,o.gZ)(++this.pageNumber,this.goodsCategoryId,this.value,this.orderBy).then((e=>{200===e.resultCode&&(0==e.data.list.length&&(this.finished=!0),this.list=this.list.concat(e.data.list),this.loading=!1,this.refreshing=!1)}))},onSearch(){this.value?this.searchReques(this.pageNumber,this.goodsCategoryId,this.value,this.orderBy):this.$toast.fail("请输入要查询的商品")},back(){this.$router.back()},onClick(e){this.value?0==e?(this.finished=!1,this.searchReques(this.pageNumber,this.goodsCategoryId,this.value,this.orderBy)):1==e?(this.finished=!1,this.orderBy="new",this.searchReques(this.pageNumber,this.goodsCategoryId,this.value,this.orderBy)):2==e&&(this.finished=!1,this.orderBy="price",this.searchReques(this.pageNumber,this.goodsCategoryId,this.value,this.orderBy)):this.$toast.fail("请输入要查询的商品")},onRefresh(){this.finished=!1,this.loading=!0,this.onLoad()},oneShoping(e){(0,o.lO)(e).then((t=>{200===t.resultCode&&this.$router.push("/info/"+e)}))}}},n=r,h=s(1001),l=(0,h.Z)(n,i,a,!1,null,"9a5a1a88",null),d=l.exports}}]);
//# sourceMappingURL=search.b92e8159.js.map